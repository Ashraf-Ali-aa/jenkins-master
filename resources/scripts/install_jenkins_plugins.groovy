def required_for_pure_jenkins_plugins = [
'ant':'1.10',
'apache-httpcomponents-client-4-api':'4.5.5-3.0',
'authentication-tokens':'1.3',
'bouncycastle-api':'2.17',
'branch-api':'2.5.4',
'build-timeout':'1.19',
'command-launcher':'1.3',
'credentials-binding':'1.20',
'credentials':'2.3.0',
'display-url-api':'2.3.2',
'docker-commons':'1.15',
'docker-workflow':'1.19',
'durable-task':'1.30',
'cloudbees-folder':'6.9',
'git-client':'2.8.2',
'git':'3.12.0',
'git-server':'1.8',
'github-api':'1.95',
'github':'1.29.4',
'gradle':'1.33',
'jackson2-api':'2.9.9.1',
'ace-editor':'1.1',
'handlebars':'1.1.1',
'jquery-detached':'1.2.1',
'momentjs':'1.1.1',
'jsch':'0.1.55.1',
'junit':'1.28',
'ldap':'1.20',
'lockable-resources':'2.5',
'mailer':'1.24',
'mapdb-api':'1.0.9.0',
'matrix-project':'1.14',
'jdk-tool':'1.3',
'workflow-aggregator':'2.6',
'pipeline-graph-analysis':'1.10',
'workflow-api':'2.36',
'workflow-basic-steps':'2.18',
'pipeline-build-step':'2.9',
'pipeline-model-definition':'1.3.9',
'pipeline-model-declarative-agent':'1.1.1',
'pipeline-model-extensions':'1.3.9',
'pipeline-github-lib':'1.0',
'workflow-cps':'2.73',
'pipeline-input-step':'2.11',
'workflow-job':'2.34',
'pipeline-milestone-step':'1.3.1',
'pipeline-model-api':'1.3.9',
'workflow-multibranch':'2.21',
'workflow-durable-task-step':'2.33',
'pipeline-rest-api':'2.12',
'workflow-scm-step':'2.9',
'workflow-cps-global-lib':'2.15',
'pipeline-stage-step':'2.3',
'pipeline-stage-tags-metadata':'1.3.9',
'pipeline-stage-view':'2.12',
'workflow-step-api':'2.20',
'workflow-support':'3.3',
'plain-credentials':'1.5',
'resource-disposer':'0.13',
'scm-api':'2.6.3',
'script-security':'1.62',
'ssh-credentials':'1.17.1',
'ssh-slaves':'1.30.1',
'structs':'1.20',
'subversion':'2.12.2',
'timestamper':'1.10',
'token-macro':'2.8',
'ws-cleanup':'0.37'
]

def custom_plugins = [
'external-monitor-job':'1.7',
'matrix-auth':'2.4.2',
'antisamy-markup-formatter':'1.6',
'pam-auth':'1.5.1',
'sbt':'1.5',
'windows-slaves':'1.4',
'job-dsl':'1.76',
'variant':'1.3',
'aws-java-sdk':'1.11.594',
'aws-credentials':'1.27',
'PrioritySorter':'3.6.0',
'ansicolor':'0.6.2',
'build-name-setter':'2.0.1',
'build-user-vars-plugin':'1.5',
'categorized-view':'1.10',
'email-ext':'2.66',
'extensible-choice-parameter':'1.6.0',
'ghprb':'1.42.0',
'hidden-parameter':'0.0.4',
'htmlpublisher':'1.18',
'jobConfigHistory':'2.23.1',
'ownership':'0.12.1',
'random-string-parameter':'1.0',
'view-job-filters':'2.1.1'
]

def not_install_plugins = [
'ace-editor':'1.1',
'amazon-ecs':'1.22',
'analysis-core':'1.96',
'azure-commons':'1.0.4',
'blueocean-autofavorite':'1.2.4',
'blueocean-bitbucket-pipeline':'1.18.1',
'blueocean-commons':'1.18.1',
'blueocean-config':'1.18.1',
'blueocean-core-js':'1.18.1',
'blueocean-dashboard':'1.18.1',
'blueocean-display-url':'2.3.0',
'blueocean-events':'1.18.1',
'blueocean-git-pipeline':'1.18.1',
'blueocean-github-pipeline':'1.18.1',
'blueocean-i18n':'1.18.1',
'blueocean-jira':'1.18.1',
'blueocean-jwt':'1.18.1',
'blueocean-personalization':'1.18.1',
'blueocean-pipeline-api-impl':'1.18.1',
'blueocean-pipeline-editor':'1.18.1',
'blueocean-pipeline-scm-api':'1.18.1',
'blueocean-rest-impl':'1.18.1',
'blueocean-rest':'1.18.1',
'blueocean-web':'1.18.1',
'blueocean':'1.18.1',
'build-pipeline-plugin':'1.5.8',
'built-on-column':'1.1',
'cloudbees-bitbucket-branch-source':'2.4.6',
'cobertura':'1.14',
'code-coverage-api':'1.0.13',
'conditional-buildstep':'1.3.6',
'config-file-provider':'3.6.2',
'copyartifact':'1.42.1',
'cvs':'2.14',
'database-postgresql':'1.0',
'database':'1.5',
'docker-build-step':'2.3',
'dynamic_extended_choice_parameter':'1.0.1',
'ec2-fleet':'1.10.2',
'envinject-api':'1.6',
'envinject':'2.2.0',
'favorite':'2.3.2',
'gatling':'1.2.6',
'github-branch-source':'2.5.6',
'groovy':'2.2',
'h2-api':'1.4.199',
'handy-uri-templates-2-api':'2.1.7-1.0',
'http_request':'1.8.23',
'javadoc':'1.5',
'jenkins-design-language':'1.18.1',
'jenkins-multijob-plugin':'1.32',
'jira':'3.0.9',
'jquery-ui':'1.0.2',
'jquery':'1.12.4-1',
'junit-attachments':'1.6',
'kubernetes-cd':'2.1.1',
'kubernetes-credentials':'0.4.1',
'kubernetes':'1.18.2',
'matrix-auth':'2.4.2',
'mercurial':'2.8',
'nodelabelparameter':'1.7.2',
'parameterized-trigger':'2.35.2',
'pipeline-aws':'1.38',
'pipeline-maven':'3.8.1',
'pipeline-utility-steps:':'2.3.0',
'pubsub-light':'1.13',
'rebuild':'1.31',
'role-strategy':'2.13',
'run-condition':'1.2',
's3':'0.11.2',
'saml':'1.1.2',
'slack':'2.32',
'sonar':'2.9',
'sse-gateway':'1.19',
'ssh-agent':'1.17',
'swarm':'3.17',
'tasks':'4.53',
'trilead-api':'1.0.5',
'uno-choice':'2.1'
]


def install_plugins(plugins_map){
	def entries = plugins_map.entrySet()
	entries.each { entry ->
	  println "${entry.key}:${entry.value}"
	  def plugin = Jenkins.instance.updateCenter.getPlugin(entry.key, new hudson.util.VersionNumber(entry.value))
	  if (plugin != null) {
	    plugin.deploy()
	  } else {
	    println("ERROR! Unable to get plugin ${entry.key}:${entry.value}!")
	  }
	}
}


println "Installing qps-infra plugins required for pure jenkins:"
install_plugins(required_for_pure_jenkins_plugins)
install_plugins(custom_plugins)
//install_plugins(not_install_plugins)